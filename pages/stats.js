import Head from 'next/head'
import Image from 'next/image'
import styles from '@/styles/stats.module.css'
import Footer from '@/components/Footer'
import { useState, useEffect } from 'react'
import Link from 'next/link'
import MaleChart from '@/components/MaleChart'
import BackButton from '@/components/BackButton'
import FemaleChart from '@/components/FemaleChart'
import UniversalChart from '@/components/UniversalChart'


export default function Stats() {

    const [isAge, setIsAge] = useState(null);

    useEffect(() => {
      const age = localStorage.getItem('age');
      setIsAge(age);
    }, []);

    console.log(isAge);
    
    return (
        <div className={styles.container}>
            <Head>
                <title>Borderless - Statistics</title>
                <meta name="description" content="Generated by create next app" />
                <meta name="viewport" content="width=device-width, initial-scale=1" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <div className={styles.top}>
                <Link href={'./statsDashboard'}><BackButton/></Link>
                <h1 className={styles.header}>Data For You</h1>
            </div>
            <main className={styles.maincontent}>
                <div className={styles.charts}>
                    <Image
                        src={'/images/diverse.jpg'}
                        alt={'diverse image'}
                        width={360}
                        height={104}
                        className={styles.dataImage}
                    />
                    {
                        isAge === '18 and under' && <div className={styles.chartBox}><FemaleChart/></div>
                    }
                    {
                        isAge === '19-25' && <div className={styles.chartBox}><MaleChart/></div>
                    }
                    {
                        isAge === '26-39' && <div className={styles.chartBox}><UniversalChart/></div>
                    }
                    {
                        isAge === '40+' && <div className={styles.chartBox}><UniversalChart/></div>
                    }
                </div>
            </main>
            <Footer/>
        </div>
    )
}